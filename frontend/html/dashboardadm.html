<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <style>
        /* Your existing styles */
    </style>
</head>
<body>

    <div class="sidebar">
        <h2>Admin Dashboard</h2>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#counselors">View Counselors</a></li>
            <li><a href="#students">View Students</a></li>
            <li><a href="#videos">Add Motivational Videos</a></li>
            <li><a href="#feedback">View Feedback</a></li>
        </ul>
    </div>

    <div class="main-content">

        <!-- Overview Section -->
        <div id="overview" class="card">
            <h3>Overview</h3>
            <div class="overview">
                <div class="card">
                    <h4>Total Counselors</h4>
                    <p id="totalCounselors">Loading...</p>
                </div>
                <div class="card">
                    <h4>Total Students</h4>
                    <p id="totalStudents">Loading...</p>
                </div>
                <div class="card">
                    <h4>Total Videos</h4>
                    <p id="totalVideos">Loading...</p>
                </div>
                <div class="card">
                    <h4>Total Feedbacks</h4>
                    <p id="totalFeedbacks">Loading...</p>
                </div>
            </div>
        </div>

        <!-- View Counselors Section -->
        <div id="counselors" class="card">
            <h3>View Counselors</h3>
            <table id="counselorsTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Qualification</th>
                        <th>Experience</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be populated here -->
                </tbody>
            </table>
        </div>

        <!-- View Students Section -->
        <div id="students" class="card">
            <h3>View Students</h3>
            <table id="studentsTable">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Grade</th>
                        <th>Career Interest</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be populated here -->
                </tbody>
            </table>
        </div>

        <!-- Add Motivational Videos Section -->
        <div id="videos" class="card">
            <h3>Add Motivational Videos</h3>
            <form class="add-video-form">
                <input type="text" placeholder="Video Title">
                <textarea placeholder="Video Description"></textarea>
                <input type="file" accept="video/*">
                <input type="submit" value="Upload Video">
            </form>
        </div>

        <!-- View Feedback Section -->
        <div id="feedback" class="card">
            <h3>View Feedback</h3>
            <table id="feedbackTable">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Counselor</th>
                        <th>Feedback</th>
                        <th>Date</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Data will be populated here -->
                </tbody>
            </table>
        </div>

    </div>

    <script>
        // Fetch stats
        async function fetchStats() {
            const response = await fetch('/api/stats');
            const data = await response.json();
            document.getElementById('totalCounselors').innerText = data.totalCounselors;
            document.getElementById('totalStudents').innerText = data.totalStudents;
            document.getElementById('totalVideos').innerText = data.totalVideos || 0; // Placeholder
            document.getElementById('totalFeedbacks').innerText = data.totalFeedbacks || 0; // Placeholder
        }

        // Fetch counselors
        async function fetchCounselors() {
            const response = await fetch('/api/counselors');
            const counselors = await response.json();
            const counselorsTableBody = document.querySelector('#counselorsTable tbody');
            counselorsTableBody.innerHTML = '';
            counselors.forEach(counselor => {
                counselorsTableBody.innerHTML += `
                    <tr>
                        <td>${counselor.name}</td>
                        <td>${counselor.highestQualification}</td>
                        <td>${counselor.experience}</td>
                        <td><button>Edit</button> <button>Deactivate</button></td>
                    </tr>
                `;
            });
        }

        // Fetch students
        async function fetchStudents() {
            const response = await fetch('/api/students');
            const students = await response.json();
            const studentsTableBody = document.querySelector('#studentsTable tbody');
            studentsTableBody.innerHTML = '';
            students.forEach(student => {
                studentsTableBody.innerHTML += `
                    <tr>
                        <td>${student.name}</td>
                        <td>${student.grade}</td>
                        <td>${student.careerInterest}</td>
                        <td><button>Edit</button> <button>Remove</button></td>
                    </tr>
                `;
            });
        }

        // Fetch feedback
        async function fetchFeedback() {
            const response = await fetch('/api/feedback');
            const feedbacks = await response.json();
            const feedbackTableBody = document.querySelector('#feedbackTable tbody');
            feedbackTableBody.innerHTML = '';
            feedbacks.forEach(feedback => {
                feedbackTableBody.innerHTML += `
                    <tr>
                        <td>${feedback.student.name}</td>
                        <td>${feedback.counselor.name}</td>
                        <td>${feedback.comment}</td>
                        <td>${new Date(feedback.date).toLocaleDateString()}</td>
                    </tr>
                `;
            });
        }

        // Load all data when the page loads
        window.onload = async () => {
            await fetchStats();
            await fetchCounselors();
            await fetchStudents();
            await fetchFeedback();
        };
    </script>
</body>
</html>
